<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../js/layui/css/layui.css">
    <link rel="stylesheet" href="../css/css/common.css">
    <link rel="stylesheet" href="../css/css/popup.css">
    <link rel="stylesheet" href="../css/css/special.css">
</head>
<body>
<div class="layui-fluid layui-anim layui-anim-upbit">
    <div class="layui-row">
        <div class="layui-col-sm12 page-title">监测日志/综合日志</div>
    </div>
    <div class="layui-row block-style">
        <div class="block-title"><span></span>&nbsp;&nbsp;实时综合日志数据分析</div>
        <div class="layui-col-sm12 echart-height" id="log_curve">
        </div>
    </div>

    <div class="layui-row">
        <div class="layui-col-sm12 block-style">
            <div>
                <div class="layui-btn-group toolbarAll">
                    <button class="layui-btn layui-btn-sm" data-toggle="modal" data-target="#myModal">日志检索</button>
                </div>
                <div class="searchTableCon" style="float:right">
                    <div class="layui-inline">
                        <input class="layui-input" name="id" id="searchInput" autocomplete="off" placeholder="请输入ID">
                    </div>
                    <button class="layui-btn layui-btn-sm" id="searchBtn" data-type="searchBtn">搜索</button>
                </div>
            </div>
            <table class="layui-table" id="table" lay-data="{url:'../package1.json',page:true,id:'tableId'}" lay-filter="single">
                <thead>
                <tr>
                    <th lay-data="{field:'id', fixed: 'left'}">ID</th>
                    <th lay-data="{field:'name'}">业务名称</th>
                    <th lay-data="{field:'ip'}">源IP</th>
                    <th lay-data="{field:'ip'}">目的IP</th>
                    <th lay-data="{field:'port'}">系统端口</th>
                    <th lay-data="{field:'user'}">用户名</th>
                    <th lay-data="{field:'sessionid'}">SESSIONID</th>
                    <th lay-data="{field:'time'}">时间</th>
                    <th lay-data="{fixed: 'right', width:178, align:'center',toolbar:'#operation'}">操作</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
</div>
<!--编辑模态框-->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form class="layui-form">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">日志检索</h4>
                </div>
                <div class="modal-body">
                    <div class="layui-form-item">
                        <label class="layui-form-label">导出时间</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" id="dateTime" autocomplete="off" class="layui-input " placeholder="-">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">业务名称</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" autocomplete="off" class="layui-input " placeholder="请输入业务名称">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">源&nbsp;&nbsp;IP</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" autocomplete="off" class="layui-input " placeholder="按号码汇总查询">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">目的IP</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" autocomplete="off" class="layui-input " placeholder="" style="float: left;width: 49%;">
                            <input type="text" lay-verify="required" autocomplete="off" class="layui-input " placeholder="" style="float: right;width: 49%;">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">URL</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" autocomplete="off" class="layui-input " placeholder="请输入URL">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">用户名</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" autocomplete="off" class="layui-input " placeholder="请输入用户名">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">SESSIONID</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" autocomplete="off" class="layui-input " placeholder="请输入SESSIONID">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">备&nbsp;&nbsp;注</label>
                        <div class="layui-input-block">
                            <textarea name="remark" placeholder="请输入内容" class="layui-textarea"></textarea>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item modal-footer">
                    <div class="layui-input-block">
                        <button type="button" class="layui-btn lay-submit" lay-submit >确定</button>
                        <button type="reset" class="layui-btn layui-btn-primary" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<script type="text/html" id="operation">
    <div class="operationCon" data-table-id="table"  >
        <a class="layui-btn detail layui-btn-xs" lay-event="detail">详情</a>
    </div>
</script>
<script src="../js/jquery-1.10.2.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/layui/layui.all.js"></script>
<script src="../js/echarts.min.js"></script>
<script src="../js/dark.js"></script>
<script src="../js/js/common.js"></script>
<script>
    $(function(){
        /*日志曲线图*/
        var base = +new Date(1968, 9, 3);
        var oneDay = 24 * 3600 * 1000;
        var date = [];
        var data = [Math.random() * 300];
        for (var i = 1; i < 20000; i++) {
            var now = new Date(base += oneDay);
            date.push([now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/'));
            data.push(Math.round((Math.random() - 0.5) * 20 + data[i - 1]));
        }
        var ecColor = ['#38404d','#0092ff','#fff'];
        var myChartLog = echarts.init(document.getElementById('log_curve'), 'dark');
        window.onresize = myChartLog.resize;
        logChartsOption = {
            backgroundColor: 'rgba(0,0,0,0)',
            title: {
                text: '日志曲线图',
                textStyle: {
                    color: ecColor[1],
                    fontSize: 14
                }
            },
            grid: {
                top: '14%',
                left: '2%',
                right: '3%',
                bottom: '2%',
                containLabel: true
            },
            tooltip: {
                trigger: 'axis',
                textStyle: {
                    color:ecColor[2],
                    fontSize:'14'
                }
            },
            legend: {
                data: ['实时日志'],
                textStyle: {
                    color: ecColor[0]
                }
            },
           /* toolbox: {
                show: true,
                right: '4%',
                iconStyle: {
                    normal: {
                        borderColor: ecColor[0]
                    }
                },
                feature: {
                    mark: {show: true},
                    dataZoom: {
                        yAxisIndex: 'none'
                    },
                    magicType: {show: true, type: ['line', 'bar']},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },*/
            xAxis: [{
                type: 'category',
                boundaryGap: false,
                axisLine: {show: true, lineStyle: {color: ecColor[0]}},
                axisTick: {show: true, lineStyle: {color: ecColor[0]}},
                axisLabel: {show: true, rotate: 36, textStyle: {fontWeight:'400',color: ecColor[0],fontSize:'12'}},
                data: date
            }],
            yAxis: {
                type: 'value',
                axisLine: {show: true, lineStyle: {color: ecColor[0]}},
                axisTick: {show: true, lineStyle: {color: ecColor[0]}},
                splitLine: {show: true, lineStyle: {type: 'dashed', color: ecColor[0]}},
                axisLabel: {show: true, textStyle: {fontWeight:'400',color: ecColor[0],fontSize:'12'}},
                minInterval: 1
            },
            series: [
                {
                    name: '实时日志',
                    type: 'line',
                    smooth: true,
                    itemStyle: {
                        normal: {
                            color:'rgb(12, 173, 255)'
                        }
                    },
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgb(90, 243, 255)'
                            }, {
                                offset: 1,
                                color: 'rgb(12, 173, 255)'
                            }])
                        }
                    },
                    data: data
                }
            ]
        };
        myChartLog.setOption(logChartsOption);

    })
</script>
</body>
</html>